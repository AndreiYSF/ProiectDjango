{% extends "hardware/baza.html" %}

{% block title %}Jurnal accesări{% endblock %}

{% block content %}
<section class="page-heading">
    <h1>Jurnal accesări</h1>
    <p>Total accesări înregistrate: {{ total_logs }}</p>
</section>

{% if errors %}
<section class="messages errors">
    <h2>Erori</h2>
    <ul>
        {% for error in errors %}
        <li>{{ error }}</li>
        {% endfor %}
    </ul>
</section>
{% endif %}

{% if info_messages %}
<section class="messages infos">
    <h2>Informații</h2>
    <ul>
        {% for message in info_messages %}
        <li>{{ message }}</li>
        {% endfor %}
    </ul>
</section>
{% endif %}

{% if accesari_count is not None %}
<section class="page-summary">
    <h2>Număr accesări în sesiunea curentă</h2>
    <p>{{ accesari_count }}</p>
</section>
{% endif %}

{% if accesari_detalii %}
<section class="page-summary">
    <h2>Detalii accesări</h2>
    <ul class="log-list">
        {% for detaliu in accesari_detalii %}
        <li>{{ detaliu }}</li>
        {% endfor %}
    </ul>
</section>
{% endif %}

{% if table_columns %}
<section class="log-table">
    <h2>Accesări în tabel</h2>
    <table>
        <thead>
            <tr>
                {% for col in table_columns %}
                <th>{{ col|title }}</th>
                {% endfor %}
            </tr>
        </thead>
        <tbody>
            {% for row in table_rows %}
            <tr>
                {% for cell in row %}
                <td>{{ cell }}</td>
                {% endfor %}
            </tr>
            {% empty %}
            <tr>
                <td colspan="{{ table_columns|length }}">Nu există accesări pentru parametrii actuali.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</section>
{% else %}
<section class="log-table">
    <h2>Accesări</h2>
    <ul class="log-list">
        {% for log in logs %}
        <li>
            <strong>#{{ log.id }}</strong> — {{ log.url }} ({{ log.pagina }}) —
            {{ log.ip_client }} — {{ log.data|date:"Y-m-d H:i:s" }}
        </li>
        {% empty %}
        <li>Nu există accesări pentru parametrii actuali.</li>
        {% endfor %}
    </ul>
</section>
{% endif %}

<section class="page-summary">
    <h2>Statistici accesări</h2>
    {% if least_page and most_page %}
    <p>Cel mai puțin accesată: <code>{{ least_page }}</code></p>
    <p>Cel mai mult accesată: <code>{{ most_page }}</code></p>
    {% else %}
    <p>Nu există suficientă activitate pentru statistici.</p>
    {% endif %}
</section>
{% endblock %}
